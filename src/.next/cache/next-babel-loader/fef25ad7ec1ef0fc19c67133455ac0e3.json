{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nvar _jsxFileName = \"/Users/gholgot/Dev/dumprepo/prismic-training-next/src/pages/index.js\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport { RichText } from 'prismic-reactjs';\nimport { linkResolver } from '../shared/utils/linkResolver';\nimport { apiEndpoint } from '../../prismic-configuration';\nimport Prismic from 'prismic-javascript';\nimport { CTABanner, FeaturedItems, NumberedItems, Separator, TextBlock } from '../components/slices';\nimport Layout from '../components/layouts';\n\nvar Home = function Home(props) {\n  return __jsx(Layout, _extends({}, props.layout, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14\n    },\n    __self: this\n  }), __jsx(RenderBody, {\n    home: props.data,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15\n    },\n    __self: this\n  }));\n};\n\nvar RenderSlices = function RenderSlices(_ref) {\n  var slices = _ref.slices;\n  return slices.map(function (slice, index) {\n    var res = function () {\n      switch (slice.slice_type) {\n        case 'cta_banner':\n          return __jsx(\"div\", {\n            key: index,\n            className: \"homepage-slice-wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 24\n            },\n            __self: this\n          }, __jsx(CTABanner, {\n            slice: slice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 25\n            },\n            __self: this\n          }));\n\n        case 'featured_items':\n          return __jsx(\"div\", {\n            key: index,\n            className: \"homepage-slice-wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 30\n            },\n            __self: this\n          }, __jsx(FeaturedItems, {\n            slice: slice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 31\n            },\n            __self: this\n          }));\n\n        case 'big_bullet_item':\n          return __jsx(\"div\", {\n            key: index,\n            className: \"homepage-slice-wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 36\n            },\n            __self: this\n          }, __jsx(NumberedItems, {\n            slice: slice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 37\n            },\n            __self: this\n          }));\n\n        case 'separator':\n          return __jsx(\"div\", {\n            key: index,\n            className: \"homepage-slice-wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 42\n            },\n            __self: this\n          }, __jsx(Separator, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 43\n            },\n            __self: this\n          }));\n\n        case 'text_block':\n          return __jsx(\"div\", {\n            key: index,\n            className: \"homepage-slice-wrapper\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 48\n            },\n            __self: this\n          }, __jsx(TextBlock, {\n            slice: slice,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 49\n            },\n            __self: this\n          }));\n\n        default:\n          return;\n      }\n    }();\n\n    return res;\n  });\n};\n\nvar RenderBody = function RenderBody(_ref2) {\n  var home = _ref2.home;\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, __jsx(\"header\", {\n    className: \"homepage-header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"l-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"homepage-header-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, RichText.render(home.title, linkResolver)))), __jsx(\"section\", {\n    className: \"homepage-banner\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, __jsx(\"img\", {\n    className: \"homepage-banner-image\",\n    src: home.banner_image.url,\n    alt: home.banner_image.alt,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"homepage-banner-box-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"homepage-banner-box\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, RichText.render(home.banner_text, linkResolver)))), __jsx(\"div\", {\n    className: \"homepage-slices-wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, __jsx(RenderSlices, {\n    slices: home.body,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  })));\n};\n\nfunction getHomePage(_x) {\n  return _getHomePage.apply(this, arguments);\n}\n\nfunction _getHomePage() {\n  _getHomePage = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee2(req) {\n    var API;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return Prismic.getApi(apiEndpoint, {\n              req: req\n            });\n\n          case 2:\n            API = _context2.sent;\n            return _context2.abrupt(\"return\", API.getSingle('homepage', {\n              'fetchLinks': 'product.sub_title'\n            }));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getHomePage.apply(this, arguments);\n}\n\nfunction getLayout(_x2) {\n  return _getLayout.apply(this, arguments);\n}\n\nfunction _getLayout() {\n  _getLayout = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(req) {\n    var API;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return Prismic.getApi(apiEndpoint, {\n              req: req\n            });\n\n          case 2:\n            API = _context3.sent;\n            return _context3.abrupt(\"return\", API.getSingle('layout'));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _getLayout.apply(this, arguments);\n}\n\nHome.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(context) {\n    var req, home, layout;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            req = context.req;\n            _context.next = 3;\n            return getHomePage(req);\n\n          case 3:\n            home = _context.sent;\n            _context.next = 6;\n            return getLayout(req);\n\n          case 6:\n            layout = _context.sent;\n            return _context.abrupt(\"return\", {\n              data: home.data,\n              layout: layout\n            });\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default Home;","map":{"version":3,"sources":["/Users/gholgot/Dev/dumprepo/prismic-training-next/src/pages/index.js"],"names":["React","RichText","linkResolver","apiEndpoint","Prismic","CTABanner","FeaturedItems","NumberedItems","Separator","TextBlock","Layout","Home","props","layout","data","RenderSlices","slices","map","slice","index","res","slice_type","RenderBody","home","render","title","banner_image","url","alt","banner_text","body","getHomePage","req","getApi","API","getSingle","getLayout","getInitialProps","context"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,SAASC,QAAT,QAAyB,iBAAzB;AACA,SAASC,YAAT,QAA6B,8BAA7B;AACA,SAASC,WAAT,QAA4B,6BAA5B;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,SAASC,SAAT,EAAoBC,aAApB,EAAmCC,aAAnC,EAAkDC,SAAlD,EAA6DC,SAA7D,QAA8E,sBAA9E;AAEA,OAAOC,MAAP,MAAmB,uBAAnB;;AAIA,IAAMC,IAAI,GAAG,SAAPA,IAAO,CAACC,KAAD;AAAA,SACX,MAAC,MAAD,eAAYA,KAAK,CAACC,MAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MACE,MAAC,UAAD;AAAY,IAAA,IAAI,EAAED,KAAK,CAACE,IAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADW;AAAA,CAAb;;AAMA,IAAMC,YAAY,GAAG,SAAfA,YAAe,OAAgB;AAAA,MAAbC,MAAa,QAAbA,MAAa;AACnC,SAAOA,MAAM,CAACC,GAAP,CAAW,UAACC,KAAD,EAAQC,KAAR,EAAkB;AAClC,QAAMC,GAAG,GAAI,YAAM;AACjB,cAAQF,KAAK,CAACG,UAAd;AACE,aAAK,YAAL;AAAmB,iBACjB;AAAK,YAAA,GAAG,EAAEF,KAAV;AAAiB,YAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,SAAD;AAAW,YAAA,KAAK,EAAED,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADiB;;AAMnB,aAAK,gBAAL;AAAuB,iBACrB;AAAK,YAAA,GAAG,EAAEC,KAAV;AAAiB,YAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,aAAD;AAAe,YAAA,KAAK,EAAED,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADqB;;AAMvB,aAAK,iBAAL;AAAwB,iBACtB;AAAK,YAAA,GAAG,EAAEC,KAAV;AAAiB,YAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,aAAD;AAAe,YAAA,KAAK,EAAED,KAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADsB;;AAMxB,aAAK,WAAL;AAAkB,iBAChB;AAAK,YAAA,GAAG,EAAEC,KAAV;AAAiB,YAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADgB;;AAMlB,aAAK,YAAL;AAAmB,iBACjB;AAAK,YAAA,GAAG,EAAEA,KAAV;AAAiB,YAAA,SAAS,EAAC,wBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE,MAAC,SAAD;AAAW,YAAA,KAAK,EAAED,KAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADiB;;AAMnB;AAAS;AA/BX;AAiCD,KAlCW,EAAZ;;AAmCA,WAAOE,GAAP;AACD,GArCM,CAAP;AAsCD,CAvCD;;AAyCA,IAAME,UAAU,GAAG,SAAbA,UAAa;AAAA,MAAGC,IAAH,SAAGA,IAAH;AAAA,SACjB,MAAC,KAAD,CAAO,QAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAQ,IAAA,SAAS,EAAC,iBAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGtB,QAAQ,CAACuB,MAAT,CAAgBD,IAAI,CAACE,KAArB,EAA4BvB,YAA5B,CADH,CADF,CADF,CADF,EASE;AAAS,IAAA,SAAS,EAAC,iBAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,uBAAf;AAAuC,IAAA,GAAG,EAAEqB,IAAI,CAACG,YAAL,CAAkBC,GAA9D;AAAmE,IAAA,GAAG,EAAEJ,IAAI,CAACG,YAAL,CAAkBE,GAA1F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE;AAAK,IAAA,SAAS,EAAC,6BAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG3B,QAAQ,CAACuB,MAAT,CAAgBD,IAAI,CAACM,WAArB,EAAkC3B,YAAlC,CADH,CADF,CAFF,CATF,EAkBE;AAAK,IAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,YAAD;AAAc,IAAA,MAAM,EAAEqB,IAAI,CAACO,IAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAlBF,CADiB;AAAA,CAAnB;;SA0BeC,W;;;;;;;2BAAf,kBAA2BC,GAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACoB5B,OAAO,CAAC6B,MAAR,CAAe9B,WAAf,EAA4B;AAAE6B,cAAAA,GAAG,EAAHA;AAAF,aAA5B,CADpB;;AAAA;AACQE,YAAAA,GADR;AAAA,8CAESA,GAAG,CAACC,SAAJ,CAAc,UAAd,EAA0B;AAAC,4BAAc;AAAf,aAA1B,CAFT;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;SAKeC,S;;;;;;;2BAAf,kBAAyBJ,GAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBACoB5B,OAAO,CAAC6B,MAAR,CAAe9B,WAAf,EAA4B;AAAE6B,cAAAA,GAAG,EAAHA;AAAF,aAA5B,CADpB;;AAAA;AACQE,YAAAA,GADR;AAAA,8CAEUA,GAAG,CAACC,SAAJ,CAAc,QAAd,CAFV;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAKAxB,IAAI,CAAC0B,eAAL;AAAA;AAAA;AAAA;AAAA;AAAA,2BAAuB,iBAAgBC,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACfN,YAAAA,GADe,GACTM,OAAO,CAACN,GADC;AAAA;AAAA,mBAEFD,WAAW,CAACC,GAAD,CAFT;;AAAA;AAEfT,YAAAA,IAFe;AAAA;AAAA,mBAGAa,SAAS,CAACJ,GAAD,CAHT;;AAAA;AAGfnB,YAAAA,MAHe;AAAA,6CAId;AACLC,cAAAA,IAAI,EAAES,IAAI,CAACT,IADN;AAELD,cAAAA,MAAM,EAAEA;AAFH,aAJc;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAvB;;AAAA;AAAA;AAAA;AAAA;;AAUA,eAAeF,IAAf","sourcesContent":["import React from 'react'\n\nimport { RichText } from 'prismic-reactjs'\nimport { linkResolver } from '../shared/utils/linkResolver'\nimport { apiEndpoint } from '../../prismic-configuration'\nimport Prismic from 'prismic-javascript'\nimport { CTABanner, FeaturedItems, NumberedItems, Separator, TextBlock } from '../components/slices'\n\nimport Layout from '../components/layouts'\n\n\n\nconst Home = (props) => (\n  <Layout {...props.layout}>\n    <RenderBody home={props.data} />    \n  </Layout>\n)\n\nconst RenderSlices = ({ slices }) => {\n  return slices.map((slice, index) => {\n    const res = (() => {\n      switch (slice.slice_type) {\n        case 'cta_banner': return (\n          <div key={index} className=\"homepage-slice-wrapper\">\n            <CTABanner slice={slice} />\n          </div>\n        )\n\n        case 'featured_items': return (\n          <div key={index} className=\"homepage-slice-wrapper\">\n            <FeaturedItems slice={slice} />\n          </div>\n        )\n\n        case 'big_bullet_item': return (\n          <div key={index} className=\"homepage-slice-wrapper\">\n            <NumberedItems slice={slice} />\n          </div>\n        )\n\n        case 'separator': return (\n          <div key={index} className=\"homepage-slice-wrapper\">\n            <Separator />\n          </div>\n        )\n\n        case 'text_block': return (\n          <div key={index} className=\"homepage-slice-wrapper\">\n            <TextBlock slice={slice} />\n          </div>\n        )\n\n        default: return\n      }\n    })();\n    return res;\n  })\n}\n\nconst RenderBody = ({ home }) => (\n  <React.Fragment>\n    <header className=\"homepage-header\">\n      <div className=\"l-wrapper\">\n        <div className=\"homepage-header-title\">\n          {RichText.render(home.title, linkResolver)}\n        </div>\n      </div>\n    </header>\n\n    <section className=\"homepage-banner\">\n      <img className=\"homepage-banner-image\" src={home.banner_image.url} alt={home.banner_image.alt} />\n      <div className=\"homepage-banner-box-wrapper\">\n        <div className=\"homepage-banner-box\">\n          {RichText.render(home.banner_text, linkResolver)}\n        </div>\n      </div>\n    </section>\n\n    <div className=\"homepage-slices-wrapper\">\n      <RenderSlices slices={home.body} />\n    </div>\n  </React.Fragment>\n);\n\n\nasync function getHomePage(req) {\n  const API = await Prismic.getApi(apiEndpoint, { req })\n  return API.getSingle('homepage', {'fetchLinks': 'product.sub_title'})\n}\n\nasync function getLayout(req) {\n  const API = await Prismic.getApi(apiEndpoint, { req })\n  return  API.getSingle('layout');\n}\n\nHome.getInitialProps = async function (context) {\n  const req = context.req;\n  const home = await getHomePage(req);\n  const layout = await getLayout(req);\n  return {\n    data: home.data,\n    layout: layout\n  }\n};\n\nexport default Home;\n\n"]},"metadata":{},"sourceType":"module"}